\section{Introduction}

\subsection{Defining the non-linear system}
A doubly inverted pendulum is a pendulum on a pendulum. What makes this a classical control problem is the
inverted nature of the system. That is instead of hanging the pendulum, the goal is to balence it upright.

The equations of motion were derived with assistance from \cite{eq_of_motion}.
{\LARGE \color{red} TODO: fix cite with a filter}

This will not be a derivation of the work, as the work follows closely from \cite{eq_of_motion} which I used
as a source to help derive the non-linear equations of motion. 


% generated equation
\begin{equation}
M = \left[\begin{matrix}m_{1} + m_{2} + m_{c} & l_{1} \left(m_{1} + m_{2}\right) \cos{\left(\theta_{1} \right)} & l_{2} m_{2} \cos{\left(\theta_{2} \right)}\\
l_{1} \left(m_{1} + m_{2}\right) \cos{\left(\theta_{1} \right)} & l_{1}^{2} \left(m_{1} + m_{2}\right) & l_{1} l_{2} m_{2} \cos{\left(\theta_{1} - \theta_{2} \right)}\\
l_{2} m_{2} \cos{\left(\theta_{2} \right)} & l_{1} l_{2} m_{2} \cos{\left(\theta_{1} - \theta_{2} \right)} & l_{2}^{2} m_{2}\end{matrix}\right]
\end{equation}
\begin{equation}
f = \left[\begin{matrix}\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\\
- \dot\theta_{1} d_{2} - \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} + g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\\
\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\end{matrix}\right]
\end{equation}
\begin{equation}
F = \left[\begin{matrix}\frac{- l_{1} l_{2} \left(m_{1} - m_{2} \cos^{2}{\left(\theta_{1} - \theta_{2} \right)} + m_{2}\right) \left(\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\right) - \frac{l_{1} \left(\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\right) \left(- m_{1} \cos{\left(\theta_{2} \right)} + m_{1} \cos{\left(2 \theta_{1} - \theta_{2} \right)} - m_{2} \cos{\left(\theta_{2} \right)} + m_{2} \cos{\left(2 \theta_{1} - \theta_{2} \right)}\right)}{2} - l_{2} \left(\dot\theta_{1} d_{2} + \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\right) \left(m_{1} \cos{\left(\theta_{1} \right)} + m_{2} \cos{\left(\theta_{1} \right)} - m_{2} \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right)}{l_{1} l_{2} \left(- m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{c} - m_{2} m_{c} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{2} m_{c} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - m_{2} m_{c} \sin^{2}{\left(\theta_{2} \right)}\right)}\\
\frac{l_{1} l_{2} \left(m_{1} \cos{\left(\theta_{1} \right)} + m_{2} \cos{\left(\theta_{1} \right)} - m_{2} \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\right) + l_{1} \left(m_{1} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{2} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{c} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\right) + l_{2} \left(m_{1} + m_{2} \sin^{2}{\left(\theta_{2} \right)} + m_{c}\right) \left(\dot\theta_{1} d_{2} + \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\right)}{l_{1}^{2} l_{2} \left(- m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{c} - m_{2} m_{c} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{2} m_{c} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - m_{2} m_{c} \sin^{2}{\left(\theta_{2} \right)}\right)}\\
\frac{- \frac{l_{1} l_{2} m_{2} \left(- m_{1} \cos{\left(\theta_{2} \right)} + m_{1} \cos{\left(2 \theta_{1} - \theta_{2} \right)} - m_{2} \cos{\left(\theta_{2} \right)} + m_{2} \cos{\left(2 \theta_{1} - \theta_{2} \right)}\right) \left(\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\right)}{2} - l_{1} \left(\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\right) \left(m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} + m_{1} m_{c} + m_{2}^{2} \sin^{2}{\left(\theta_{1} \right)} + m_{2} m_{c}\right) - l_{2} m_{2} \left(\dot\theta_{1} d_{2} + \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\right) \left(m_{1} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{2} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{c} \cos{\left(\theta_{1} - \theta_{2} \right)}\right)}{l_{1} l_{2}^{2} m_{2} \left(- m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{c} - m_{2} m_{c} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{2} m_{c} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - m_{2} m_{c} \sin^{2}{\left(\theta_{2} \right)}\right)}\end{matrix}\right]
\end{equation}
\begin{equation}
  \dot x = \frac d {dt} \begin{bmatrix} y \\
 \dot y \end{bmatrix} = 
\left[\begin{matrix}\dot\theta_{2}\\
\dot\theta_{1}\\
\doty\\
\frac{- l_{1} l_{2} \left(m_{1} - m_{2} \cos^{2}{\left(\theta_{1} - \theta_{2} \right)} + m_{2}\right) \left(\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\right) - \frac{l_{1} \left(\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\right) \left(- m_{1} \cos{\left(\theta_{2} \right)} + m_{1} \cos{\left(2 \theta_{1} - \theta_{2} \right)} - m_{2} \cos{\left(\theta_{2} \right)} + m_{2} \cos{\left(2 \theta_{1} - \theta_{2} \right)}\right)}{2} - l_{2} \left(\dot\theta_{1} d_{2} + \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\right) \left(m_{1} \cos{\left(\theta_{1} \right)} + m_{2} \cos{\left(\theta_{1} \right)} - m_{2} \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right)}{l_{1} l_{2} \left(- m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{c} - m_{2} m_{c} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{2} m_{c} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - m_{2} m_{c} \sin^{2}{\left(\theta_{2} \right)}\right)}\\
\frac{l_{1} l_{2} \left(m_{1} \cos{\left(\theta_{1} \right)} + m_{2} \cos{\left(\theta_{1} \right)} - m_{2} \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\right) + l_{1} \left(m_{1} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{2} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{c} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\right) + l_{2} \left(m_{1} + m_{2} \sin^{2}{\left(\theta_{2} \right)} + m_{c}\right) \left(\dot\theta_{1} d_{2} + \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\right)}{l_{1}^{2} l_{2} \left(- m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{c} - m_{2} m_{c} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{2} m_{c} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - m_{2} m_{c} \sin^{2}{\left(\theta_{2} \right)}\right)}\\
\frac{- \frac{l_{1} l_{2} m_{2} \left(- m_{1} \cos{\left(\theta_{2} \right)} + m_{1} \cos{\left(2 \theta_{1} - \theta_{2} \right)} - m_{2} \cos{\left(\theta_{2} \right)} + m_{2} \cos{\left(2 \theta_{1} - \theta_{2} \right)}\right) \left(\dot\theta_{1}^{2} l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)} + \dot\theta_{2}^{2} l_{2} m_{2} \sin{\left(\theta_{2} \right)} - \doty d_{1} + u\right)}{2} - l_{1} \left(\dot\theta_{1}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - \dot\theta_{2} d_{3} + g l_{2} m_{2} \sin{\left(\theta_{2} \right)}\right) \left(m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} + m_{1} m_{c} + m_{2}^{2} \sin^{2}{\left(\theta_{1} \right)} + m_{2} m_{c}\right) - l_{2} m_{2} \left(\dot\theta_{1} d_{2} + \dot\theta_{2}^{2} l_{1} l_{2} m_{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - g l_{1} \left(m_{1} + m_{2}\right) \sin{\left(\theta_{1} \right)}\right) \left(m_{1} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{2} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} + m_{c} \cos{\left(\theta_{1} - \theta_{2} \right)}\right)}{l_{1} l_{2}^{2} m_{2} \left(- m_{1}^{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{2} \sin^{2}{\left(\theta_{1} \right)} - m_{1} m_{c} - m_{2} m_{c} \sin^{2}{\left(\theta_{1} \right)} + 2 m_{2} m_{c} \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - m_{2} m_{c} \sin^{2}{\left(\theta_{2} \right)}\right)}\end{matrix}\right]
\end{equation}
This is unreadable

For this, I assumed: 
\begin{enumerate}\item $m_c = 1$
\item $m_1 = 1$
\item $m_2 = 1$
\item $l_1 = 1$
\item $l_2 = 1$
\item $g = 1$
\item $d_1 = 1$
\item $d_2 = 1$
\item $d_3 = 1$
\end{enumerate}
% generated equation
\begin{equation}
M = \left[\begin{matrix}2.0 & 2.0 \cos{\left(\theta_{1} \right)} & 1.0 \cos{\left(\theta_{2} \right)}\\
2.0 \cos{\left(\theta_{1} \right)} & 4.0 & 2.0 \cos{\left(\theta_{1} - \theta_{2} \right)}\\
1.0 \cos{\left(\theta_{2} \right)} & 2.0 \cos{\left(\theta_{1} - \theta_{2} \right)} & 2.0\end{matrix}\right]
\end{equation}
\begin{equation}
f = \left[\begin{matrix}2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} \right)} + 1.0 \dot\theta_{2}^{2} \sin{\left(\theta_{2} \right)} - 0.1 \doty + u\\
- 0.1 \dot\theta_{1} - 2.0 \dot\theta_{2}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} + 19.62 \sin{\left(\theta_{1} \right)}\\
2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 0.1 \dot\theta_{2} + 9.81 \sin{\left(\theta_{2} \right)}\end{matrix}\right]
\end{equation}
\begin{equation}
F = \left[\begin{matrix}\frac{- \left(64.0 \cos{\left(\theta_{1} \right)} - 32.0 \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(0.1 \dot\theta_{1} + 2.0 \dot\theta_{2}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 19.62 \sin{\left(\theta_{1} \right)}\right) + \left(64.0 \cos^{2}{\left(\theta_{1} - \theta_{2} \right)} - 128.0\right) \left(2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} \right)} + 1.0 \dot\theta_{2}^{2} \sin{\left(\theta_{2} \right)} - 0.1 \doty + u\right) - 32.0 \left(- 4.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} + 0.2 \dot\theta_{2} - 19.62 \sin{\left(\theta_{2} \right)}\right) \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{1} - \theta_{2} \right)}}{- 128.0 \sin^{2}{\left(\theta_{1} \right)} + 128.0 \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - 64.0 \sin^{2}{\left(\theta_{2} \right)} - 64.0}\\
\frac{- \left(16.0 \cos{\left(\theta_{1} \right)} \cos{\left(\theta_{2} \right)} - 32.0 \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 0.1 \dot\theta_{2} + 9.81 \sin{\left(\theta_{2} \right)}\right) + \left(32.0 \cos{\left(\theta_{1} \right)} - 16.0 \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} \right)} + 1.0 \dot\theta_{2}^{2} \sin{\left(\theta_{2} \right)} - 0.1 \doty + u\right) - \left(8.0 \cos^{2}{\left(\theta_{2} \right)} - 32.0\right) \left(0.1 \dot\theta_{1} + 2.0 \dot\theta_{2}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 19.62 \sin{\left(\theta_{1} \right)}\right)}{- 64.0 \sin^{2}{\left(\theta_{1} \right)} + 64.0 \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - 32.0 \sin^{2}{\left(\theta_{2} \right)} - 32.0}\\
\frac{- 1.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 0.0375 \dot\theta_{1} \cos{\left(\theta_{1} - \theta_{2} \right)} + 0.0125 \dot\theta_{1} \cos{\left(\theta_{1} + \theta_{2} \right)} - 0.25 \dot\theta_{2}^{2} \sin{\left(2 \theta_{1} - 2 \theta_{2} \right)} - 0.025 \dot\theta_{2} \cos{\left(2 \theta_{1} \right)} + 0.075 \dot\theta_{2} - 0.025 \doty \cos{\left(\theta_{2} \right)} + 0.025 \doty \cos{\left(2 \theta_{1} - \theta_{2} \right)} + 0.25 u \cos{\left(\theta_{2} \right)} - 0.25 u \cos{\left(2 \theta_{1} - \theta_{2} \right)} - 2.4525 \sin{\left(\theta_{2} \right)} + 2.4525 \sin{\left(2 \theta_{1} - \theta_{2} \right)}}{0.25 \cos{\left(2 \theta_{1} \right)} + 0.25 \cos{\left(2 \theta_{1} - 2 \theta_{2} \right)} - 1.0}\end{matrix}\right]
\end{equation}
\begin{equation}
  \dot x = \frac d {dt} \begin{bmatrix} y \\
 \dot y \end{bmatrix} = 
\left[\begin{matrix}\dot\theta_{2}\\
\dot\theta_{1}\\
\doty\\
\frac{- \left(64.0 \cos{\left(\theta_{1} \right)} - 32.0 \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(0.1 \dot\theta_{1} + 2.0 \dot\theta_{2}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 19.62 \sin{\left(\theta_{1} \right)}\right) + \left(64.0 \cos^{2}{\left(\theta_{1} - \theta_{2} \right)} - 128.0\right) \left(2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} \right)} + 1.0 \dot\theta_{2}^{2} \sin{\left(\theta_{2} \right)} - 0.1 \doty + u\right) - 32.0 \left(- 4.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} + 0.2 \dot\theta_{2} - 19.62 \sin{\left(\theta_{2} \right)}\right) \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{1} - \theta_{2} \right)}}{- 128.0 \sin^{2}{\left(\theta_{1} \right)} + 128.0 \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - 64.0 \sin^{2}{\left(\theta_{2} \right)} - 64.0}\\
\frac{- \left(16.0 \cos{\left(\theta_{1} \right)} \cos{\left(\theta_{2} \right)} - 32.0 \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 0.1 \dot\theta_{2} + 9.81 \sin{\left(\theta_{2} \right)}\right) + \left(32.0 \cos{\left(\theta_{1} \right)} - 16.0 \cos{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)}\right) \left(2.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} \right)} + 1.0 \dot\theta_{2}^{2} \sin{\left(\theta_{2} \right)} - 0.1 \doty + u\right) - \left(8.0 \cos^{2}{\left(\theta_{2} \right)} - 32.0\right) \left(0.1 \dot\theta_{1} + 2.0 \dot\theta_{2}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 19.62 \sin{\left(\theta_{1} \right)}\right)}{- 64.0 \sin^{2}{\left(\theta_{1} \right)} + 64.0 \sin{\left(\theta_{1} \right)} \sin{\left(\theta_{2} \right)} \cos{\left(\theta_{1} - \theta_{2} \right)} - 32.0 \sin^{2}{\left(\theta_{2} \right)} - 32.0}\\
\frac{- 1.0 \dot\theta_{1}^{2} \sin{\left(\theta_{1} - \theta_{2} \right)} - 0.0375 \dot\theta_{1} \cos{\left(\theta_{1} - \theta_{2} \right)} + 0.0125 \dot\theta_{1} \cos{\left(\theta_{1} + \theta_{2} \right)} - 0.25 \dot\theta_{2}^{2} \sin{\left(2 \theta_{1} - 2 \theta_{2} \right)} - 0.025 \dot\theta_{2} \cos{\left(2 \theta_{1} \right)} + 0.075 \dot\theta_{2} - 0.025 \doty \cos{\left(\theta_{2} \right)} + 0.025 \doty \cos{\left(2 \theta_{1} - \theta_{2} \right)} + 0.25 u \cos{\left(\theta_{2} \right)} - 0.25 u \cos{\left(2 \theta_{1} - \theta_{2} \right)} - 2.4525 \sin{\left(\theta_{2} \right)} + 2.4525 \sin{\left(2 \theta_{1} - \theta_{2} \right)}}{0.25 \cos{\left(2 \theta_{1} \right)} + 0.25 \cos{\left(2 \theta_{1} - 2 \theta_{2} \right)} - 1.0}\end{matrix}\right]
\end{equation}
{\LARGE \color{red} TODO: fix runnon equations...... somehow}

\subsection{Defining the linear system}
The Linearization was simply a jacobian taken at 0,0,0 which is an equilibrium point that the system will be
controlled to.

\begin{equation}
 \dot x = \left[\begin{matrix}0 & 0 & 0 & 0 & 0 & 1.0\\0 & 0 & 0 & 0 & 1.0 & 0\\0 & 0 & 0 & 1.0 & 0 & 0\\0 & - \frac{g \left(m_{1} + m_{2}\right)}{m_{c}} & 0 & - \frac{d_{1}}{m_{c}} & \frac{d_{2}}{l_{1} m_{c}} & 0\\0 & \frac{g \left(m_{1} + m_{2}\right) \left(m_{1} + m_{c}\right)}{l_{1} m_{1} m_{c}} & - \frac{g m_{2}}{l_{1} m_{1}} & \frac{d_{1}}{l_{1} m_{c}} & - \frac{d_{2} \left(m_{1} + m_{c}\right)}{l_{1}^{2} m_{1} m_{c}} & \frac{d_{3}}{l_{1} l_{2} m_{1}}\\0 & - \frac{g \left(m_{1} + m_{2}\right)}{l_{2} m_{1}} & \frac{g \left(m_{1} m_{c} + m_{2} m_{c}\right)}{l_{2} m_{1} m_{c}} & 0 & \frac{d_{2}}{l_{1} l_{2} m_{1}} & - \frac{d_{3} \left(m_{1} m_{c} + m_{2} m_{c}\right)}{l_{2}^{2} m_{1} m_{2} m_{c}}\end{matrix}\right]\left[\begin{matrix}y\\\theta_{1}\\\theta_{2}\\\doty\\\dot\theta_{1}\\\dot\theta_{2}\end{matrix}\right] + \left[\begin{matrix}0\\0\\0\\\frac{1}{m_{c}}\\- \frac{1}{l_{1} m_{c}}\\0\end{matrix}\right]u
\end{equation}

\begin{equation}
 \dot x = \left[\begin{matrix}0 & 0 & 0 & 0 & 0 & 1.0\\0 & 0 & 0 & 0 & 1.0 & 0\\0 & 0 & 0 & 1.0 & 0 & 0\\0 & -9.81 & 0 & -0.1 & 0.05 & 0\\0 & 14.715 & -4.905 & 0.05 & -0.075 & 0.05\\0 & -9.81 & 9.81 & -1.0 \cdot 10^{-141} & 0.05 & -0.1\end{matrix}\right]\left[\begin{matrix}y\\\theta_{1}\\\theta_{2}\\\doty\\\dot\theta_{1}\\\dot\theta_{2}\end{matrix}\right] + \left[\begin{matrix}0\\0\\0\\1.0\\-0.5\\-2.0 \cdot 10^{-140}\end{matrix}\right]u
\end{equation}

